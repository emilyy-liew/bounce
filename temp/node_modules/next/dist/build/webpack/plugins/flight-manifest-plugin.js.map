{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["ClientReferenceManifestPlugin","pluginState","getProxiedPluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","constructor","options","dev","appDir","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","clientModules","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","traverseModules","chunkGroups","chunkGroup","getAppPathRequiredChunks","chunks","map","requiredChunk","SYSTEM_ENTRYPOINTS","has","files","file","endsWith","id","flat","filter","nonNullable","requiredChunks","recordModule","chunkCSS","isCSSModule","isCSSMod","layer","WEBPACK_LAYERS","appClient","type","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","relative","resourceResolveData","path","startsWith","replace","exportName","getClientReferenceModuleKey","isClientComponentEntryModule","exportsInfo","moduleGraph","getExportsInfo","isAsyncModule","cjsExports","dep","base","names","clientRefs","Boolean","esmResource","test","sep","addClientReference","async","edgeExportName","addSSRIdMapping","moduleExportedKeys","exports","exportInfo","provided","key","chunk","chunkModules","chunkGraph","getChunkModulesIterable","f","modId","getModuleId","anyModule","modules","concatenatedMod","CLIENT_REFERENCE_MANIFEST","json","JSON","stringify","undefined","sources","RawSource"],"mappings":"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"}