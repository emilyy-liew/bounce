{"version":3,"sources":["../../../src/client/components/layout-router.tsx"],"names":["React","useContext","use","ReactDOM","CacheStates","LayoutRouterContext","GlobalLayoutRouterContext","TemplateContext","fetchServerResponse","createInfinitePromise","ErrorBoundary","matchSegment","handleSmoothScroll","RedirectBoundary","NotFoundBoundary","getSegmentValue","createRouterCacheKey","walkAddRefetch","segmentPathToWalk","treeToRecreate","segment","parallelRouteKey","isLast","length","hasOwnProperty","subTree","undefined","slice","findDOMNode","instance","window","process","env","NODE_ENV","originalConsoleError","console","error","messages","includes","rectProperties","elementCanScroll","element","rect","getBoundingClientRect","every","item","topOfElementInViewport","viewportHeight","top","getHashFragmentDomNode","hashFragment","document","body","getElementById","getElementsByName","InnerScrollAndFocusHandler","Component","componentDidMount","handlePotentialScroll","componentDidUpdate","props","focusAndScrollRef","apply","render","children","segmentPath","segmentPaths","some","scrollRefSegmentPath","index","domNode","Element","HTMLElement","nextElementSibling","scrollTo","offsetTop","htmlElement","documentElement","clientHeight","scrollTop","scrollIntoView","dontForceLayout","focus","ScrollAndFocusHandler","context","Error","InnerLayoutRouter","parallelRouterKey","url","childNodes","childProp","tree","cacheKey","changeByServerResponse","fullTree","childNode","get","current","set","status","READY","data","subTreeData","parallelRoutes","Map","LAZY_INITIALIZED","refetchTree","DATA_FETCH","URL","location","origin","nextUrl","head","flightData","overrideCanonicalUrl","href","setTimeout","startTransition","subtree","Provider","value","LoadingBoundary","loading","loadingStyles","hasLoading","Suspense","fallback","OuterLayoutRouter","errorStyles","templateStyles","template","notFound","notFoundStyles","asNotFound","styles","childNodesForParallelRouter","treeSegment","childPropSegment","currentChildSegmentValue","preservedSegments","map","preservedSegment","isChildPropSegment","preservedSegmentValue","key","errorComponent","isActive"],"mappings":"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"}