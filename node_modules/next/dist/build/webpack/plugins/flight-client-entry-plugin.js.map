{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-client-entry-plugin.ts"],"names":["ClientReferenceEntryPlugin","PLUGIN_NAME","pluginState","getProxiedPluginState","serverActions","edgeServerActions","actionModServerId","actionModEdgeServerId","serverCSSManifest","edgeServerCSSManifest","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","injectedClientEntries","deduplicateCSSImportsForEntry","mergedCSSimports","sortedCSSImports","Object","entries","sort","a","b","aPath","bPath","aDepth","split","length","bDepth","aName","path","parse","name","bName","indexA","indexOf","indexB","dedupedCSSImports","trackedCSSImports","Set","entryName","cssImports","cssImport","has","filename","includes","add","push","constructor","options","dev","appDir","isEdgeServer","useServerActions","assetPrefix","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","finishMake","tapPromise","createClientEntries","afterCompile","recordModule","modId","mod","modResource","resourceResolveData","resource","layer","WEBPACK_LAYERS","client","ssrNamedModuleId","relative","context","startsWith","normalizePathSep","replace","traverseModules","_chunk","_chunkGroup","request","buildInfo","rsc","moduleGraph","isAsync","String","make","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createActionAssets","addClientEntryAndSSRModulesList","addActionEntryList","actionMapsPerEntry","forEachEntryModule","entryModule","internalClientComponentEntryImports","actionEntryImports","Map","clientEntriesToInject","connection","getOutgoingConnections","entryDependency","dependency","entryRequest","clientComponentImports","actionImports","collectComponentInfoFromDependencies","forEach","dep","names","isAbsoluteRequest","isAbsolute","value","relativeRequest","bundlePath","assign","absolutePagePath","clientEntryToInject","injectClientEntryAndSSRModules","clientImports","APP_CLIENT_INTERNALS","size","errors","Error","injectActionEntry","actions","collectClientEntryDependencyMap","clientEntryDependencyMap","entry","get","includeDependencies","getResolvedModule","finishModules","addedClientActionEntryList","actionMapsPerClientEntry","tracked","clientActionImports","fromClient","Promise","all","afterOptimizeModules","cssImportsForChunk","cssManifest","collectModule","isCSSMod","chunkGroups","chunkGroup","chunks","chunk","endsWith","join","chunkModules","chunkGraph","getChunkModulesIterable","anyModule","modules","concatenatedMod","entryCSSInfo","cssModules","data","manifest","JSON","stringify","undefined","FLIGHT_SERVER_CSS_MANIFEST","sources","RawSource","invalidator","getInvalidator","outputPath","some","shouldInvalidate","invalidate","COMPILER_NAMES","map","addClientEntryAndSSRModules","visitedBySegment","CSSImports","filterClientComponents","dependencyToFilter","inClientComponentBoundary","isCSS","modRequest","query","storeKey","isClientComponent","isClientComponentEntryModule","getActions","sideEffectFree","factoryMeta","unused","getExportsInfo","isModuleUsed","EDGE_RUNTIME_WEBPACK","test","Array","from","loaderOptions","server","clientLoader","importPath","sep","clientSSRLoader","getEntries","pageKey","getEntryKey","type","EntryTypes","CHILD_ENTRY","parentEntries","absoluteEntryFilePath","dispose","lastActiveTime","Date","now","entryData","clientComponentEntryDep","EntryPlugin","createDependency","addEntry","actionsArray","actionLoader","__client_imported__","currentCompilerServerActions","p","id","generateActionId","workers","action","actionEntryDep","resolve","reject","call","addModuleTree","contextInfo","issuerLayer","err","module","failedEntry","succeedEntry","mapping","json","node","edge","SERVER_REFERENCE_MANIFEST"],"mappings":"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"}